# Лекция 5. ООП в CSharp

06.02.20

- [Лекция 5. ООП в CSharp](#Лекция-5-ООП-в-csharp)
  - [Способы передачи параметров](#Способы-передачи-параметров)
  - [Перегрузка операций](#Перегрузка-операций)
  - [Абстрактные методы и классы](#Абстрактные-методы-и-классы)
  - [Интерфейс](#Интерфейс)
  - [Индексаторы](#Индексаторы)

## Способы передачи параметров

По ссылке и по значению.

По умолчанию все параметры передаются по значению.

`ref` - передача по ссылке. Необходимо указывать и при описании метода, и при передаче аргумента. Передача в оба направления.

`out` - передача по ссылке с целью извлечения из метода. Передача в одном направлении. Необходимо проинициализировать значение внутри метода.

## Перегрузка операций

A + B

A \* B

Ключевое слово `operator`.

Метод, перегружающий оператор - операторный метод.

```cs
public static тип_результата operator знак_операции(тип_1 операнд_1, тип_2, операнд_2)
{
    // ...
}
```

Хотя бы один из двух операндов должен по типу совпадать с классом, где этот операторный метод определен. Тип результата не обязан совпадать с классом.

Для унарной операции аналогично, только нет третьего параметра.

Перегружаемые методы должны отличаться количеством или типом аргументов.

## Абстрактные методы и классы

__Абстрактный метод__ - метод, не имеющий реализации, т. е. содержащий только описание.

Ключевое слово `abstract`.

Абстрактный метод автоматически становится виртуальным.

Статические методы не могут быть абстрактными.

__Абстрактный класс__ - класс, в котором есть хотя бы один абстрактный метод. Технически абстрактный класс может не содержать абстрактных методов.

Класс, содержащий хотя бы один абстрактный метод, обязательно является абстрактным.

Ключевое слово `abstract`.

Абстрактный класс нельзя инстанцировать, т. е. нельзя создать объекты абстрактного класса.

От абстрактного класса можно построить производный неабстрактный класс, переопределив в нем все абстрактные методы.

Базовый класс для всех классов - класс `Object`.

## Интерфейс

__Интерфейс__ - средство объявления тех действий, которые должен выполнять объект.

Интерфейс нужен для описания того, что должен уметь объект, без описания того, как это происходит.

Интерфейс содержит только абстрактные методы и не имеет полей.

Говорят, что класс реализует интерфейс, если в классе описаны все методы, объявленные в интерфейсе.

В языке C# необходимо явно указывать, что класс реализует интерфейс.

Один интерфейс может быть реализован в нескольких классах. Один класс может реализовывать несколько интерфейсов. Унаследовать от нескольких классов, даже абстрактных, нельзя.

Ключевое слово `interface`. Все методы в интерфейсе по умолчанию имеют уровень доступа `public` и являются виртуальными.

Интерфейсы могут содержать свойства, события и индексаторы, но не могут содержать поля.

Интерфейсы не имеют конструкторов, статических элементов и операторных методов.

Интерфейсы могут наследоваться друг от друга.

Основные отличия интерфейсов от абстрактных классов:

- допускают множественное наследование
- не содержат реализации методов
- не содержат полей

## Индексаторы

__Индексатор__ - специальный метод, который позволяет обращаться к объекту класса как к массиву.

```cs
тип_элемента this[тип_1 аргумент_1, тип_2 аргумент_2, ...]
{
    get { return ... ; }
    set { ... = value; }
}
```

```cs
class Translit
{
    string[] t = {"a", "b", "v", ...};
    public string this[char c]
    {
        get
        {
            if (c >= 'a' && c <= 'z') return t[c-'a'];
            // else throw new IndexOutOfRangeException();
            else return c.ToString();
        }
    }
}

var rus = "Пермь 2020";
var translit = new Translit();
var eng = "";
foreach (var c in rus)
{
    eng += translit[c];
}
```
