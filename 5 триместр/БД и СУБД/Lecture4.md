# Лекция 4

05.02.20

- [Лекция 4](#Лекция-4)
  - [Продолжение](#Продолжение)
    - [ACID](#acid)
    - [6. Архивация и восстановление](#6-Архивация-и-восстановление)
    - [7. Защита данных от несанкцонированного доступа](#7-Защита-данных-от-несанкцонированного-доступа)
    - [8. Дружелюбный интерфейс](#8-Дружелюбный-интерфейс)
  - [Введение в нормализацию](#Введение-в-нормализацию)
    - [Алгоритм нормализации](#Алгоритм-нормализации)

## Продолжение

### ACID

__Durability__ (надежность, живучесть) - данные обработаны и зафиксированы на носителе. Вы знаете, что там всегда находится непротиворечивая информация, которую вы всегда можете взять.

### 6. Архивация и восстановление

Для архивации и восстановления современные СУБД предоставляют специальные средства, в том числе те, которые могут работать по регламенту, т. е. в автоматизированном режиме - система сама делает полную копию БД, например, на удаленных серверах, по расписанию. Но действенность этих средств зависит от человеческого фактора и администратора БД.

### 7. Защита данных от несанкцонированного доступа

Современные СУБД предоставляют разнообразные средства защиты данных, которые можно _условно_ свести к средствам, работающим на уровне данных и на уровне операций.

На уровне данных определяются права доступа, модификации в целом на уровне доступа к таблицам, к отдельным записям и даже к отдельным значениям.

На уровне операций (чтения, модификацию без удаления и удаления).

Сам __уровень доступа__ определяется комбинацией прав по уровню доступа к данным и операциям. И обычно это приписывается не отдельным пользователям, а __ролям__, а пользователи имеют те или иные роли.

Примеры:

1. Группе пользователей с одной определенной ролью будет разрешено просматривать все таблицы, а модифицировать только определенные, причем без удаления записей и таблиц.
2. Или им будет разрешено все: модификация и удаление всех таблиц и записей кроме значения определенного поля в определенных таблицах, например, значения зарплаты вышестоящего начальства.

Общее правило: чем низкоуровневее и специализированнее по отношению к данным, тем дороже с точки зрения эффективности работы системы по времени соответствующий контроль.

### 8. Дружелюбный интерфейс

Понятию дружелюбного интерфейса посвящено много материалов в интернете.

Принцип Ашманова.

Коротко рассмотрим часть принципов дружелюбного интерфеса, которые нужно соблюдать при выполнении работы по типу АРМ.

Принципы:

- не набирать, а выбирать. Т. е. один раз введенные пользователем данные далее должны предлагаться ему для выбора в виде выпадающих списков или контекстного меню. Поставить значения по умолчанию для облегчения и сокращения времени ввода. Не показывать категории, которые не имеют смысла в данный момент.

    Если ввод данных предполагает небольшое количество `control`, то вполне достаточно `checkbox`, `radiobutton`, `combobox`. Но в последнем случае нужно соблюдать принцип "Upper(AllTrim(...))".

    В БД индексацию можно делать как по полю, так и по выражению от поля.

    Принципиально для дружелюбного интерфейса сокращение и облегчение ввода данных пользователя. Поэтому в частности не рекомендуется требовать от пользователя перехода на определенный регистр при вводе, и при этом либо программа автоматически по требованию заказчика приводит первую букву к заглавной, либо данные сохраняются так, как они введены и предлагаются для выбора в том виде, в котором они введены, а при поиске - эта разница (регистр, пробелы и т. д.) нивелируется, например, с использованием индексов по нужному полю, где в индексном выражении используется `Upper(AllTrim(...))`.

    При выборе ранее введенного значения из списка надо применять такой же механизм, т. к. пользователь мог не заметить в списке нужного ему значения в списке и ввести его заново в любом регистре.

    Если список очень большой, то надо использовать `control` типа `treeview`, `listview` с `checkbox`.

- интерфейс не должен утомлять. Поэтому при проектировании приложения надо проанализировать требования к интерфейсу не только заказчика, но и непосредственных пользователей.

    Если показателей много, то большое количество контролов будет утомлять.

    Вид интерфейса в таком случае должен быть приближен к интерфейсу такого документа или текста к заключению по осмотру пациента, например, "жалоб нет". И только после наведения на эту фразу появляется контекстное меню или выпадающий список с отображением жалоб или проявлений.

- идеальный вариант - интерфейс должен быть настолько понятный для пользователей, что не требуется обращение к help. В особенности в случае ввода данных.

    Не стоит типичные, широко используемые термины использовать в одном смысле или вводить новые обозначения для известных лейблов или диаграмм.

    Одинаковые действия для разных сущностей должны иметь одинаковые интерфейсы.

- пользователь в любой момент времени должен знать, какое действие в текущем окне, что надо сделать, чтобы вернуться на шаг назад, что надо сделать, чтобы пройти на шаг вперед, и что сделать, чтобы выйти из системы.

    Для этого одного крестика не достаточно, надо продублировать кнопкой, близкой к последнему контролу.

    Может помочь _контекстный_ help (hints, статус-бары, выпадающие списки).

- защита от дурака: все, что выпадает в виде списка, меню, обязательно должно контролироваться системой (в т. ч. то, на что разработчик рассчитывает, но не сообщает).

    Пример: рассчет на то, что приходит число вместо строки.

## Введение в нормализацию

Преимущества СУБД перед традиционными средствами обработки файлов проявляются лишь при условии тщательного проектирования данных. Для традиционных моделей данных (МД) (иерархического, сетевого и реляционного типа) проектирование данных на логическом уровне выполняется на основе __теории нормализации__.

! __Теория нормализации__ гарантирует построение лучшей схемы БД из всех возможных для данной предметной области (ПрО) с точки зрения отсутствия аномалий при включении, удалении и изменении данных. _Небезразлично, как атрибуты данных распределены по разным таблицам._

__DEF Нормализация__ - это _пошаговый_ _обратимый_ процесс _декомпозиции_ исходных отношений (в т. ч. _универсального_ отношения) на результирующие отношения с последовательным устранением нежелательных функциональных зависимостей (ФЗ).

### Алгоритм нормализации

Рассмотрим алгоритм нормализации на примере фрагмента БД "Счет-фактура", где хранятся данные:

    Счет-фактура(номер фактуры (уникальный), дата (1 ед.), код поставщика, название поставщика, адрес поставщика, код банка (с данным поставщиком работаем только через данный банк и один счет), название банка, адрес банка, ИНН банка, номер кор. счета, шифр товара, название товара, единиц товара, цена товара, количество товара)

Товар не повторяется дважды.

В одной счет-фактуре сведения об одном и том же товаре не дублируются.

В разных счет-фактурах один и тот же товар даже от одного и того же поставщика может иметь разную цену.

[ДЗ](Homework4.md)
