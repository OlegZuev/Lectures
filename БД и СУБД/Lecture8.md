# Лекция 8

04.03.20

## Нормальные формы высших порядков

Нормальные формы до 3 порядка включительно учитывают только ФЗ неключевых атрибутов от ключа или его части, а также наличие ФЗ между самими неключевыми атрибутами.

После третьего шага нормализации необходимо учесть наличие других видов зависимости между атрибутами. Например, в случае, когда какой-то неключевой атрибут или группа неключевых атрибутов определяет однозначно часть ключа или весь ключ, и когда между атрибутами есть т. н. многозначные зависимости.

! НО на практике зачастую достаточно 3НФ и избыточностью, вызванной другими видами зависимостей, пренебрегают.

К НФ высших порядков относят: усиленную 3НФ (форму Бойса-Кодда), многозначные зависимости (4НФ), зависимости по соединению (5НФ), 6НФ, 7НФ...

__К экзамену__: знать определения и уметь привести примеры НФ. Необходимо самостоятельно найти формальные определения.

НФБК на практике чаще всего встречается тогда, когда среди неключевых атрибутов содержатся претенденты (кандидаты) на естественный первичный ключ, но не были выбраны в качестве первичного ключа. _В примере с счет-фактурой им был ИНН банка._ Это приводит к избыточности, которую устраняют проекцией исходного отношения на два.

__DEF.__ __Многозначные зависимости__ являются обобщением ФЗ, но в отличие от них не являются однозначными.

## Зависимость по соединению

Пусть A, B, C - некоторый набор атрибутов отношения F. Говорят, что A ->> B (A многозначно определяет B), если значению A может быть сопоставлено более одного значения B.

А в случае зависимости по соединению обычно существуют несколько многозначных зависимостей, и они не являются транзитивными.

Как устранить избыточность, связанную с многозначными зависимостями? Сделать проекцию.

На практике (в ДЗ по авиа и в обоих вариантах КР) мы столкнулись с ситуацией, когда в процессе нормализации (декомпозиции) от исходного отношения остаются только ключевые атрибуты.

В варианте авиа, где дни недели являются повторяющейся группой, строки будут повторяться столько раз, сколько раз самолет летал, сколько раз было дней и т. д.

[Пример Авиа (excel1.xlsx)](res/lecture8/excel1.xlsx)

- Номер рейса ->> дни вылета
- Дни вылета ->> дата вылета
- Номер рейса ->> пассажир

После таких вертикальных вырезок (проекций) получившееся отношение проверяют на предмет учета представленных в них зависимостей в ранее полученных отношениях. И может оказаться, что нужно сохранить все результаты проекции, а может оказаться, что только часть, либо даже в условиях неполноты ничего не сохранять.

[Разбор КР по нормализации](res/lecture8/exam_explanation1.md)

[Таблица с КР по нормализации (excel2.xlsx)](res/lecture8/excel2.xlsx)

[ДЗ](Homework6.md)
